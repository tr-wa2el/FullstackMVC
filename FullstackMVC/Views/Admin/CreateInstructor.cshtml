@model FullstackMVC.Models.Instructor

@{
    ViewData["Title"] = "Create Instructor";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid mt-4">
    <div class="row justify-content-center">
     <div class="col-lg-8 col-xl-6">
<div class="card shadow-lg">
   <div class="card-header bg-success text-white">
         <h3 class="mb-0">
  <i class="bi bi-person-plus-fill"></i> Create New Instructor
    </h3>
          </div>
            <div class="card-body p-4">
         <form asp-action="CreateInstructor" method="post" class="needs-validation" novalidate>
       <div asp-validation-summary="ModelOnly" class="alert alert-danger d-none" role="alert">
         <h6><i class="bi bi-exclamation-triangle"></i> Please fix the following errors:</h6>
            </div>

     <div class="row g-3">
       <!-- Name -->
<div class="col-md-6">
         <label asp-for="Name" class="form-label fw-bold">
<i class="bi bi-person"></i> Instructor Name
    </label>
  <input asp-for="Name" class="form-control" 
      placeholder="Enter full name" maxlength="100" required />
        <span asp-validation-for="Name" class="text-danger small"></span>
       <div class="form-text">
         <i class="bi bi-info-circle"></i> Full name of the instructor
               </div>
            </div>

    <!-- Salary -->
         <div class="col-md-6">
              <label asp-for="Salary" class="form-label fw-bold">
       <i class="bi bi-currency-dollar"></i> Salary
      </label>
        <input asp-for="Salary" class="form-control" type="number" 
             min="0" step="0.01" placeholder="Enter salary" />
                 <span asp-validation-for="Salary" class="text-danger small"></span>
   <div class="form-text">
           <i class="bi bi-info-circle"></i> Monthly salary (optional)
    </div>
          </div>

 <!-- Department -->
 <div class="col-12">
        <label asp-for="DeptId" class="form-label fw-bold">
 <i class="bi bi-building"></i> Department
     </label>
            <select asp-for="DeptId" class="form-select" asp-items="ViewBag.Departments">
    <option value="">-- Select Department (Optional) --</option>
       </select>
       <span asp-validation-for="DeptId" class="text-danger small"></span>
 <div class="form-text">
          <i class="bi bi-info-circle"></i> Department where the instructor will teach
   </div>
         </div>

       <!-- Address -->
           <div class="col-12">
     <label asp-for="Address" class="form-label fw-bold">
      <i class="bi bi-geo-alt"></i> Address
  </label>
      <textarea asp-for="Address" class="form-control" rows="2" 
          placeholder="Enter instructor address (optional)" maxlength="200"></textarea>
           <span asp-validation-for="Address" class="text-danger small"></span>
        <div class="form-text">
              <i class="bi bi-info-circle"></i> Maximum 200 characters (optional)
   </div>
   </div>

       <!-- Profile Image -->
           <div class="col-12">
   <label asp-for="Image" class="form-label fw-bold">
<i class="bi bi-image"></i> Profile Image URL
     </label>
     <input asp-for="Image" class="form-control" type="url" 
          placeholder="https://example.com/profile-image.jpg" maxlength="500" />
 <span asp-validation-for="Image" class="text-danger small"></span>
 <div class="form-text">
           <i class="bi bi-info-circle"></i> Enter a valid image URL (optional)
          </div>
              </div>
   </div>

            <!-- Action Buttons -->
      <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
      <a asp-action="Instructors" class="btn btn-outline-secondary btn-lg">
    <i class="bi bi-arrow-left"></i> Back to Instructors
           </a>
   <div>
  <button type="reset" class="btn btn-outline-warning me-2">
    <i class="bi bi-arrow-clockwise"></i> Reset Form
       </button>
   <button type="submit" class="btn btn-success btn-lg">
   <i class="bi bi-save"></i> Create Instructor
       </button>
     </div>
         </div>
           </form>
          </div>
      </div>
        </div>
</div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Bootstrap form validation
        (function() {
            'use strict';
            window.addEventListener('load', function() {
     var forms = document.getElementsByClassName('needs-validation');
     var validation = Array.prototype.filter.call(forms, function(form) {
     form.addEventListener('submit', function(event) {
             if (form.checkValidity() === false) {
      event.preventDefault();
 event.stopPropagation();
            }
     form.classList.add('was-validated');
            }, false);
 });
            }, false);
        })();

        // Show validation summary if there are model errors
        @if (!ViewData.ModelState.IsValid)
        {
  <text>
          document.addEventListener('DOMContentLoaded', function() {
       document.querySelector('.alert-danger').classList.remove('d-none');
           });
            </text>
 }

   // Real-time image preview
        document.getElementById('Image').addEventListener('input', function(e) {
     const imageUrl = e.target.value;
       const preview = document.getElementById('image-preview');
      
      if (imageUrl && imageUrl.match(/\.(jpeg|jpg|gif|png)$/)) {
     if (!preview) {
                const previewDiv = document.createElement('div');
  previewDiv.id = 'image-preview';
       previewDiv.className = 'mt-2';
     previewDiv.innerHTML = '<img src="' + imageUrl + '" class="img-thumbnail" style="max-width: 100px; max-height: 100px;" alt="Preview" onerror="this.style.display=\'none\';">';
   e.target.parentNode.appendChild(previewDiv);
         } else {
        preview.querySelector('img').src = imageUrl;
             preview.querySelector('img').style.display = 'block';
       }
            } else if (preview) {
     preview.remove();
            }
        });
    </script>

    <style>
     .card {
        border: none;
      border-radius: 15px;
      }
   
      .card-header {
            border-radius: 15px 15px 0 0 !important;
       padding: 1.5rem;
        }

        .form-control, .form-select {
            border-radius: 10px;
        padding: 0.75rem;
            border: 2px solid #e9ecef;
          transition: all 0.3s ease;
        }
        
   .form-control:focus, .form-select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            transform: translateY(-1px);
        }
    
    .btn {
    border-radius: 10px;
   padding: 0.75rem 1.5rem;
     font-weight: 500;
       transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
     box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

    .form-label {
    color: #495057;
            margin-bottom: 0.5rem;
        }
        
  .form-text {
            color: #6c757d;
            font-size: 0.875rem;
 }
        
        .border-top {
            border-color: #e9ecef !important;
        }
        
        .was-validated .form-control:valid,
   .was-validated .form-select:valid {
border-color: #28a745;
 }
        
        .was-validated .form-control:invalid,
        .was-validated .form-select:invalid {
            border-color: #dc3545;
        }
  </style>
}