@model IEnumerable<FullstackMVC.Models.Department>

@{
    ViewData["Title"] = "Departments";
}

<div class="container-fluid mt-4">
    <div class="row">
  <div class="col-12">
     <h1 class="mb-4">
 <i class="bi bi-building"></i> University Departments
  </h1>
   </div>
    </div>

    @if (Model != null && Model.Any())
    {
        <!-- Department Statistics -->
   <div class="row g-4 mb-4">
      <div class="col-md-3">
    <div class="card bg-primary text-white shadow">
      <div class="card-body text-center">
 <i class="bi bi-building" style="font-size: 3rem; opacity: 0.7;"></i>
      <h3 class="mt-2">@Model.Count()</h3>
    <p class="mb-0">Total Departments</p>
     </div>
         </div>
     </div>
   <div class="col-md-3">
    <div class="card bg-success text-white shadow">
   <div class="card-body text-center">
         <i class="bi bi-people" style="font-size: 3rem; opacity: 0.7;"></i>
        <h3 class="mt-2">@Model.Sum(d => d.Students?.Count ?? 0)</h3>
   <p class="mb-0">Total Students</p>
        </div>
       </div>
     </div>
     <div class="col-md-3">
 <div class="card bg-info text-white shadow">
        <div class="card-body text-center">
       <i class="bi bi-book" style="font-size: 3rem; opacity: 0.7;"></i>
      <h3 class="mt-2">@Model.Sum(d => d.Courses?.Count ?? 0)</h3>
  <p class="mb-0">Total Courses</p>
     </div>
     </div>
  </div>
  <div class="col-md-3">
      <div class="card bg-warning text-dark shadow">
  <div class="card-body text-center">
         <i class="bi bi-laptop" style="font-size: 3rem; opacity: 0.7;"></i>
    <h3 class="mt-2">@Model.Sum(d => d.PcNumbers)</h3>
       <p class="mb-0">Total PCs</p>
     </div>
       </div>
     </div>
  </div>

   <!-- Departments Grid -->
      <div class="row g-4">
           @foreach (var department in Model)
     {
         <div class="col-md-6 col-lg-4">
      <div class="card h-100 shadow border-0">
       <div class="card-header bg-gradient text-white text-center" 
   style="background: linear-gradient(45deg, #6c5ce7, #a29bfe);">
   <h5 class="mb-0">
     <i class="bi bi-building-fill"></i> @department.Name
     </h5>
   </div>
 <div class="card-body">
       <!-- Department Info -->
    <div class="mb-3">
    <h6 class="text-primary">
     <i class="bi bi-person-badge"></i> Manager
       </h6>
       <p class="mb-1">@department.MangerName</p>
    </div>

   <div class="mb-3">
  <h6 class="text-success">
       <i class="bi bi-geo-alt"></i> Location
   </h6>
    <p class="mb-1">@department.Location</p>
    </div>

    <div class="mb-3">
    <h6 class="text-info">
       <i class="bi bi-laptop"></i> PC Resources
    </h6>
     <p class="mb-1">@department.PcNumbers PCs Available</p>
     </div>

   <!-- Statistics -->
   <div class="row text-center mb-3">
        <div class="col-6">
<div class="border rounded p-2 bg-light">
      <div class="h5 text-primary mb-0">@(department.Students?.Count ?? 0)</div>
         <small class="text-muted">Students</small>
      </div>
       </div>
     <div class="col-6">
         <div class="border rounded p-2 bg-light">
       <div class="h5 text-success mb-0">@(department.Courses?.Count ?? 0)</div>
 <small class="text-muted">Courses</small>
   </div>
  </div>
   </div>
   </div>
   
    <!-- Students List (if any) -->
  @if (department.Students != null && department.Students.Any())
   {
     <div class="card-footer bg-light">
   <h6 class="text-dark mb-2">
      <i class="bi bi-people-fill"></i> Students
    </h6>
         <div class="d-flex flex-wrap gap-1">
     @foreach (var student in department.Students.Take(5))
           {
    <span class="badge bg-primary small">@student.Name</span>
  }
         @if (department.Students.Count() > 5)
    {
      <span class="badge bg-secondary small">+@(department.Students.Count() - 5) more</span>
}
         </div>
       </div>
   }

 <!-- Courses List (if any) -->
   @if (department.Courses != null && department.Courses.Any())
     {
        <div class="card-footer bg-light">
         <h6 class="text-dark mb-2">
       <i class="bi bi-book-fill"></i> Courses
       </h6>
   <div class="d-flex flex-wrap gap-1">
         @foreach (var course in department.Courses.Take(3))
       {
   <span class="badge bg-success small">@course.Name</span>
   }
       @if (department.Courses.Count() > 3)
    {
      <span class="badge bg-secondary small">+@(department.Courses.Count() - 3) more</span>
      }
       </div>
     </div>
}
       </div>
     </div>
     }
   </div>
    }
    else
    {
 <!-- No Departments -->
 <div class="row">
        <div class="col-12">
 <div class="card shadow text-center">
   <div class="card-body py-5">
     <i class="bi bi-building text-muted" style="font-size: 5rem;"></i>
        <h3 class="mt-3 text-muted">No Departments Found</h3>
     <p class="text-muted">There are currently no departments in the system.</p>
       </div>
        </div>
   </div>
   </div>
    }

 <!-- Quick Actions -->
 <div class="row mt-4">
   <div class="col-12">
          <div class="card shadow">
        <div class="card-header bg-light">
      <h5 class="mb-0">Quick Actions</h5>
     </div>
   <div class="card-body">
       <div class="d-flex flex-wrap gap-2">
  <a asp-action="Dashboard" class="btn btn-outline-primary">
       <i class="bi bi-speedometer2"></i> Back to Dashboard
  </a>
      <a asp-action="MyCourses" class="btn btn-outline-success">
   <i class="bi bi-book-fill"></i> My Courses
      </a>
 <a asp-action="AllCourses" class="btn btn-outline-info">
   <i class="bi bi-collection"></i> All Courses
      </a>
      <a asp-action="EditProfile" class="btn btn-outline-warning">
   <i class="bi bi-person-gear"></i> Edit Profile
       </a>
 </div>
    </div>
     </div>
     </div>
    </div>
</div>

<style>
.bg-gradient {
background: linear-gradient(45deg, #6c5ce7, #a29bfe) !important;
}
</style>