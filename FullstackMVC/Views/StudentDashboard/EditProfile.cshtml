@model FullstackMVC.Models.Student

@{
    ViewData["Title"] = "Edit Profile";
}

<div class="container mt-5">
    <div class="row justify-content-center">
 <div class="col-md-8">
     <div class="card shadow">
 <div class="card-header bg-warning text-dark">
        <h2 class="mb-0">
     <i class="bi bi-person-gear"></i> Edit My Profile
   </h2>
 </div>
     <div class="card-body">
  <div class="alert alert-info">
          <i class="bi bi-info-circle"></i> 
    <strong>Note:</strong> You can only edit your Name, Address, and Profile Image. 
     Other information like SSN, Age, Gender, and Department can only be changed by administrators.
      </div>

      <form asp-action="EditProfile" method="post">
    <input type="hidden" asp-for="SSN" />
<input type="hidden" asp-for="Age" />
         <input type="hidden" asp-for="Gender" />
      <input type="hidden" asp-for="DeptId" />
   
       <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

         <!-- Read-Only Information -->
     <div class="row mb-4">
    <div class="col-12">
         <h5 class="text-muted mb-3">
 <i class="bi bi-lock-fill"></i> Read-Only Information
      </h5>
     </div>
 <div class="col-md-6">
 <label class="form-label">Student SSN</label>
         <input type="text" class="form-control" value="@Model.SSN" readonly />
     </div>
       <div class="col-md-6">
<label class="form-label">Age</label>
    <input type="text" class="form-control" value="@Model.Age years" readonly />
    </div>
    <div class="col-md-6 mt-3">
   <label class="form-label">Gender</label>
<input type="text" class="form-control" value="@Model.Gender" readonly />
      </div>
      <div class="col-md-6 mt-3">
       <label class="form-label">Department</label>
     <input type="text" class="form-control" value="@Model.Department?.Name" readonly />
     </div>
      </div>

    <hr />

    <!-- Editable Information -->
      <div class="row mb-4">
  <div class="col-12">
  <h5 class="text-primary mb-3">
     <i class="bi bi-pencil-fill"></i> Editable Information
      </h5>
    </div>
    <div class="col-md-12 mb-3">
     <label asp-for="Name" class="form-label"></label>
     <input asp-for="Name" class="form-control" />
      <span asp-validation-for="Name" class="text-danger"></span>
     </div>

    <div class="col-md-12 mb-3">
 <label asp-for="Address" class="form-label"></label>
    <textarea asp-for="Address" class="form-control" rows="3" placeholder="Enter your full address"></textarea>
       <span asp-validation-for="Address" class="text-danger"></span>
     </div>

        <div class="col-md-12 mb-3">
         <label asp-for="Image" class="form-label"></label>
    <input asp-for="Image" class="form-control" placeholder="https://example.com/profile-image.jpg" />
     <span asp-validation-for="Image" class="text-danger"></span>
     <small class="form-text text-muted">Enter a URL to your profile image (optional)</small>
       </div>
</div>

     <!-- Current Profile Image Preview -->
        @if (!string.IsNullOrEmpty(Model.Image))
     {
      <div class="row mb-4">
           <div class="col-12">
    <h6 class="text-secondary">Current Profile Image</h6>
       <div class="text-center">
   <img src="@Model.Image" alt="Profile Image" class="img-thumbnail" style="max-width: 200px; max-height: 200px;" 
  onerror="this.src='https://via.placeholder.com/200x200?text=No+Image';" />
     </div>
      </div>
     </div>
    }

     <div class="d-flex gap-2">
        <button type="submit" class="btn btn-warning btn-lg">
 <i class="bi bi-save"></i> Save Changes
       </button>
      <a asp-action="Dashboard" class="btn btn-secondary btn-lg">
         <i class="bi bi-arrow-left"></i> Back to Dashboard
        </a>
     </div>
      </form>
     </div>
      </div>
       </div>
  </div>
</div>

@section Scripts {
@{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}